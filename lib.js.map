{"version":3,"sources":["lib/dragable.js","lib/emitter.js","lib/xor4096.js"],"names":["makeDragable","dragHandle","dragTarget","dragObj","_dragObj","xOffset","yOffset","addEventListener","startDrag","document","querySelector","e","preventDefault","stopPropagation","style","position","rect","getBoundingClientRect","type","clientX","left","clientY","top","window","dragObject","targetTouches","transform","onmouseup","removeEventListener","module","exports","Emitter","obj","mixin","key","prototype","on","event","fn","_callbacks","push","once","off","apply","arguments","removeListener","removeAllListeners","length","callbacks","cb","i","splice","emit","args","slice","call","len","listeners","hasListeners","global","define","XorGen","seed","me","next","w","X","t","v","init","j","limit","Math","max","charCodeAt","copy","f","impl","opts","Date","xg","state","prng","double","bot","result","int32","uint32_range","n","amd","xor4096"],"mappings":"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","file":"public/lib.js","sourcesContent":["// https://stackoverflow.com/questions/9334084/moveable-draggable-div\n// https://stackoverflow.com/a/47596086\n// with modifications\n\nexport default function makeDragable(dragHandle, dragTarget) {\n    let dragObj = null //object to be moved\n    let _dragObj\n    let xOffset = 0 //used to prevent dragged object jumping to mouse location\n    let yOffset = 0\n\n    if (dragHandle.addEventListener != null && dragTarget.addEventListener != null) {\n        dragHandle.addEventListener('mousedown', startDrag, true)\n        dragHandle.addEventListener('touchstart', startDrag, true)\n        _dragObj = dragTarget\n    } else {\n        document.querySelector(dragHandle).addEventListener('mousedown', startDrag, true)\n        document.querySelector(dragHandle).addEventListener('touchstart', startDrag, true)\n        _dragObj = document.querySelector(dragTarget)\n    }\n\n    /*sets offset parameters and starts listening for mouse-move*/\n    function startDrag(e) {\n        e.preventDefault()\n        e.stopPropagation()\n        dragObj = _dragObj\n        dragObj.style.position = 'absolute'\n        const rect = dragObj.getBoundingClientRect()\n\n        if (e.type === 'mousedown') {\n            xOffset = e.clientX - rect.left //clientX and getBoundingClientRect() both use viewable area adjusted when scrolling aka 'viewport'\n            yOffset = e.clientY - rect.top\n            window.addEventListener('mousemove', dragObject, true)\n        } else if (e.type === 'touchstart') {\n            xOffset = e.targetTouches[0].clientX - rect.left\n            yOffset = e.targetTouches[0].clientY - rect.top\n            window.addEventListener('touchmove', dragObject, true)\n        }\n    }\n\n    /*Drag object*/\n    function dragObject(e) {\n        e.preventDefault()\n        e.stopPropagation()\n\n        if (dragObj == null)\n            return // if there is no object being dragged then do nothing\n        dragObj.style.transform = 'translate(0)'\n        if (e.type === 'mousemove') {\n            dragObj.style.left = e.clientX - xOffset + 'px' // adjust location of dragged object so doesn't jump to mouse position\n            dragObj.style.top = e.clientY - yOffset + 'px'\n        } else if (e.type === 'touchmove') {\n            dragObj.style.left = e.targetTouches[0].clientX - xOffset + 'px' // adjust location of dragged object so doesn't jump to mouse position\n            dragObj.style.top = e.targetTouches[0].clientY - yOffset + 'px'\n        }\n    }\n\n    /*End dragging*/\n    document.addEventListener('mouseup', function onmouseup(e) {\n        if (dragObj) {\n            dragObj = null\n            window.removeEventListener('mousemove', dragObject, true)\n            window.removeEventListener('touchmove', dragObject, true)\n        }\n    })\n}\n","/*\n(The MIT License)\n\nCopyright (c) 2014 Component contributors <dev@component.io>\n\nPermission is hereby granted, free of charge, to any person\nobtaining a copy of this software and associated documentation\nfiles (the \"Software\"), to deal in the Software without\nrestriction, including without limitation the rights to use,\ncopy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following\nconditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\nOF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\nHOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n*/\n\n/**\n * Expose `Emitter`.\n */\n\nif (typeof module !== 'undefined') {\n  module.exports = Emitter;\n}\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks['$' + event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1104.3115.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 4.5 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / ((1 << 30) * 4); };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / ((1 << 30) * 4),\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  prng.uint32_range = function(max) {\n    if (max <= 0)\n      return 0;\n    if ((max & (max-1)) === 0)\n      return (xg.next() >>> 0) & (max - 1) | 0;\n    var v, n = (((1 << 31) >>> 0) - 1 - ((1 << 31) >>> 0) % max)\n    do {\n      v = (xg.next() >>> 0);\n    } while (v > n);\n    return v % max;\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n"]}